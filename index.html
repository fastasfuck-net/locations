<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Live Standorte - Interactive Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body { 
      height: 100%; 
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #0a0a0a;
      overflow: hidden;
    }

    #map { 
      width: 100%; 
      height: 100%; 
      position: relative;
      z-index: 1;
    }

    /* Header Overlay */
    .header-overlay {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0.4) 70%, rgba(0,0,0,0) 100%);
      z-index: 1000;
      padding: 20px 30px;
      pointer-events: none;
    }

    .header-content {
      display: flex;
      justify-content: space-between;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
    }

    .header-title {
      color: #ffffff;
      font-size: 24px;
      font-weight: 600;
      letter-spacing: -0.02em;
    }

    .status-indicator {
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(255,255,255,0.1);
      backdrop-filter: blur(10px);
      border-radius: 50px;
      padding: 8px 16px;
      color: #ffffff;
      font-size: 14px;
      font-weight: 500;
    }

    .status-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: #00ff88;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.6; transform: scale(1.1); }
    }

    /* Legend */
    .legend {
      position: absolute;
      bottom: 30px;
      left: 30px;
      background: rgba(0,0,0,0.85);
      backdrop-filter: blur(20px);
      border-radius: 16px;
      padding: 20px;
      z-index: 1000;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
    }

    .legend-title {
      color: #ffffff;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .legend-item {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 8px;
      color: #cccccc;
      font-size: 14px;
    }

    .legend-dot {
      width: 12px;
      height: 12px;
      border-radius: 50%;
      border: 2px solid white;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }

    .legend-dot.active {
      background: #00ff88;
      animation: glow 2s ease-in-out infinite alternate;
    }

    .legend-dot.planned {
      background: #ffaa00;
    }

    @keyframes glow {
      from { box-shadow: 0 2px 8px rgba(0,255,136,0.3); }
      to { box-shadow: 0 2px 20px rgba(0,255,136,0.6); }
    }

    /* Custom Marker Styles */
    .custom-marker {
      border-radius: 50%;
      width: 20px;
      height: 20px;
      border: 3px solid white;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
    }

    .custom-marker:hover {
      transform: scale(1.2);
      box-shadow: 0 6px 20px rgba(0,0,0,0.4);
    }

    .custom-marker.active {
      animation: pulse-marker 2s infinite;
    }

    @keyframes pulse-marker {
      0%, 100% { 
        transform: scale(1);
        box-shadow: 0 4px 12px rgba(0,255,136,0.3);
      }
      50% { 
        transform: scale(1.1);
        box-shadow: 0 6px 20px rgba(0,255,136,0.6);
      }
    }

    /* Custom Popup Styles */
    .leaflet-popup-content-wrapper {
      background: rgba(0,0,0,0.9);
      backdrop-filter: blur(20px);
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 20px 40px rgba(0,0,0,0.5);
    }

    .leaflet-popup-content {
      color: #ffffff;
      font-family: 'Inter', sans-serif;
      margin: 16px 20px;
      font-size: 16px;
      font-weight: 500;
      text-align: center;
    }

    .leaflet-popup-tip {
      background: rgba(0,0,0,0.9);
      border: 1px solid rgba(255,255,255,0.1);
    }

    .popup-title {
      font-size: 18px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .popup-status {
      font-size: 14px;
      opacity: 0.8;
    }

    /* Stats Panel */
    .stats-panel {
      position: absolute;
      top: 30px;
      right: 30px;
      background: rgba(0,0,0,0.85);
      backdrop-filter: blur(20px);
      border-radius: 16px;
      padding: 20px;
      z-index: 1000;
      border: 1px solid rgba(255,255,255,0.1);
      box-shadow: 0 20px 40px rgba(0,0,0,0.3);
      min-width: 200px;
    }

    .stats-title {
      color: #ffffff;
      font-size: 16px;
      font-weight: 600;
      margin-bottom: 12px;
    }

    .stat-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 8px;
      color: #cccccc;
      font-size: 14px;
    }

    .stat-value {
      font-weight: 600;
      color: #00ff88;
    }

    /* Mobile Responsive */
    @media (max-width: 768px) {
      .header-overlay {
        padding: 15px 20px;
      }
      
      .header-title {
        font-size: 20px;
      }
      
      .legend, .stats-panel {
        position: relative;
        margin: 10px;
        width: calc(100% - 20px);
      }
      
      .stats-panel {
        top: auto;
        bottom: 120px;
      }
    }
  </style>
</head>
<body>
  <!-- Header Overlay -->
  <div class="header-overlay">
    <div class="header-content">
      <div class="header-title">FastAsFuck - Global Network</div>
    </div>
  </div>

  <!-- Main Map -->
  <div id="map"></div>

  <!-- Legend -->
  <div class="legend">
    <div class="legend-title">Status Legend</div>
    <div class="legend-item">
      <div class="legend-dot active"></div>
      <span>Active Locations</span>
    </div>
    <div class="legend-item">
      <div class="legend-dot planned"></div>
      <span>Planned Locations</span>
    </div>
  </div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Initialize map with smooth animations
    const map = L.map('map', {
      zoomControl: false,
      preferCanvas: true
    }).setView([20, 0], 2);

    // Add zoom control to top right
    L.control.zoom({
      position: 'topright'
    }).addTo(map);

    // Dark theme tile layer with better styling
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/">OSM</a> | FastAsFuck Network',
      maxZoom: 18,
    }).addTo(map);

    // GeoJSON data embedded
    const geojsonData = {
      "type": "FeatureCollection",
      "features": [
        {
          "type": "Feature",
          "properties": {
            "title": "India\n(planned)",
            "marker-color": "#ffaa00",
            "status": "planned"
          },
          "geometry": {"type": "Point", "coordinates": [72.8866275, 19.0815772]}
        },
        {
          "type": "Feature",
          "properties": {
            "title": "Dallas\n(Active)",
            "marker-color": "#00ff88",
            "status": "active"
          },
          "geometry": {"type": "Point", "coordinates": [-96.7968559, 32.7762719]}
        },
        {
          "type": "Feature",
          "properties": {
            "title": "Los Angeles\n(Active)",
            "marker-color": "#00ff88",
            "status": "active"
          },
          "geometry": {"type": "Point", "coordinates": [-118.242766, 34.0536909]}
        },
        {
          "type": "Feature",
          "properties": {
            "title": "Netherlands\n(Active)",
            "marker-color": "#00ff88",
            "status": "active"
          },
          "geometry": {"type": "Point", "coordinates": [6.0600452, 50.8939883]}
        },
        {
          "type": "Feature",
          "properties": {
            "title": "South Korea\n(Active)",
            "marker-color": "#00ff88",
            "status": "active"
          },
          "geometry": {"type": "Point", "coordinates": [126.9782914, 37.5666791]}
        }
      ]
    };

    let activeCount = 0;
    let plannedCount = 0;

    // Create GeoJSON layer with enhanced markers
    const geoLayer = L.geoJSON(geojsonData, {
      pointToLayer: function (feature, latlng) {
        const color = feature.properties["marker-color"] || "#ff0000";
        const status = feature.properties.status || "unknown";
        
        // Count locations by status
        if (status === 'active') activeCount++;
        if (status === 'planned') plannedCount++;

        const divIcon = L.divIcon({
          className: "",
          html: `<div class="custom-marker ${status}" style="background:${color};"></div>`,
          iconSize: [20, 20],
          iconAnchor: [10, 10]
        });

        const marker = L.marker(latlng, { icon: divIcon });
        
        // Enhanced popup content
        const [location, statusText] = feature.properties.title.split('\n');
        marker.bindPopup(`
          <div class="popup-title">${location}</div>
          <div class="popup-status">${statusText}</div>
        `, {
          closeButton: false,
          offset: [0, -10]
        });

        // Add hover effects
        marker.on('mouseover', function() {
          this.openPopup();
        });

        return marker;
      }
    }).addTo(map);

    // Update stats
    document.getElementById('active-count').textContent = activeCount;
    document.getElementById('planned-count').textContent = plannedCount;
    document.getElementById('total-count').textContent = activeCount + plannedCount;

    // Fit map to markers with padding
    setTimeout(() => {
      map.fitBounds(geoLayer.getBounds(), {
        padding: [50, 50]
      });
    }, 100);

    // Add subtle map interactions
    map.on('zoomend', function() {
      const zoom = map.getZoom();
      const markers = document.querySelectorAll('.custom-marker');
      markers.forEach(marker => {
        const scale = Math.min(1 + (zoom - 2) * 0.1, 2);
        marker.style.transform = `scale(${scale})`;
      });
    });

    // Animate markers on load
    setTimeout(() => {
      const markers = document.querySelectorAll('.custom-marker');
      markers.forEach((marker, index) => {
        setTimeout(() => {
          marker.style.opacity = '1';
          marker.style.transform = 'scale(1)';
        }, index * 200);
      });
    }, 500);
  </script>
</body>
</html>
