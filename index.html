<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Live Map</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
  <style>
    html, body { height: 100%; margin: 0; }
    #map { width: 100%; height: 100%; }
    .custom-marker {
      border-radius: 50%;
      width: 16px;
      height: 16px;
      border: 2px solid white;
    }
    .leaflet-marker-icon.custom-marker {
      background: none !important;
      border: none !important;
    }
  </style>
</head>
<body>
  <div id="map"></div>

  <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
  <script>
    // Karte erstellen
    const map = L.map('map').setView([20, 0], 2);

    // Dunkles Theme
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
      attribution: '&copy; <a href="https://www.openstreetmap.org/">OSM</a>'
    }).addTo(map);

    // GeoJSON laden
    fetch("eC91g-fastasfuck-locations.geojson")
  .then(res => res.json())
  .then(data => {
    const geoLayer = L.geoJSON(data, {
      pointToLayer: function (feature, latlng) {
        const color = feature.properties["marker-color"] || "#ff0000";
        const divIcon = L.divIcon({
          className: "custom-marker",
          html: `<div style="background:${color}; width:16px; height:16px; border-radius:50%; border:2px solid white"></div>`,
          iconSize: [16, 16]
        });
        return L.marker(latlng, { icon: divIcon })
          .bindPopup(`<b>${feature.properties.title}</b>`);
      },
      style: () => null // ðŸš« verhindert Linien/Shapes aus den Properties
    }).addTo(map);

    // Karte automatisch auf alle Marker zoomen
    map.fitBounds(geoLayer.getBounds());
  });

  </script>
</body>
</html>
